!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.VuePullTo=e():t.VuePullTo=e()}(this,function(){return function(t){function e(i){if(o[i])return o[i].exports;var n=o[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var o={};return e.m=t,e.c=o,e.i=function(t){return t},e.d=function(t,o,i){e.o(t,o)||Object.defineProperty(t,o,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var o=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(o,"a",o),o},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=2)}([function(t,e,o){o(9);var i=o(7)(o(4),o(8),"data-v-12abd9fb",null);i.options.__file="/Users/stackjie/Documents/github_project/vue-fast-scroll/src/vue-pull-to.vue",i.esModule&&Object.keys(i.esModule).some(function(t){return"default"!==t&&"__esModule"!==t}),i.options.functional,t.exports=i.exports},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={pullText:"下拉刷新",triggerText:"释放更新",loadingText:"加载中...",doneText:"加载完成",failText:"加载失败",loadedStayTime:400,stayDistance:50,triggerDistance:70},n={pullText:"上拉加载",triggerText:"释放更新",loadingText:"加载中...",doneText:"加载完成",failText:"加载失败",loadedStayTime:400,stayDistance:50,triggerDistance:70};e.TOP_DEFAULT_CONFIG=i,e.BOTTOM_DEFAULT_CONFIG=n},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(0),n=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=n.default,t.exports=e.default},function(t,e,o){"use strict";function i(t,e){for(var o in e)t[o]=e[o]}function n(t,e){var o=null;return function(){var i=this,n=arguments;clearTimeout(o),o=setTimeout(function(){t.apply(i,n)},e)}}Object.defineProperty(e,"__esModule",{value:!0}),e.extend=i,e.throttle=n},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(3),n=o(1);e.default={name:"vue-pull-to",props:{distanceIndex:{type:Number,default:2},topBlockHeight:{type:Number,default:50},bottomBlockHeight:{type:Number,default:50},topLoadMethod:{type:Function},bottomLoadMethod:{type:Function},isThrottle:{type:Boolean,default:!0},topConfig:{type:Object,default:function(){return{}},validator:function(t){return(0,i.extend)(t,n.TOP_DEFAULT_CONFIG),t}},bottomConfig:{type:Object,default:function(){return{}},validator:function(t){return(0,i.extend)(t,n.BOTTOM_DEFAULT_CONFIG),t}}},data:function(){return{scrollEl:null,startScrollTop:0,startY:0,currentY:0,distance:0,direction:0,diff:0,beforeDiff:0,topText:"",bottomText:"",state:"",bottomReached:!1}},watch:{state:function(t){"down"===this.direction?this.$emit("top-state-change",t):this.$emit("bottom-state-change",t)}},methods:{actionPull:function(){this.state="pull","down"===this.direction?this.topText=this.topConfig.pullText:this.bottomText=this.bottomConfig.pullText},actionTrigger:function(){this.state="trigger","down"===this.direction?this.topText=this.topConfig.triggerText:this.bottomText=this.bottomConfig.triggerText},actionLoading:function(){this.state="loading","down"===this.direction?(this.topText=this.topConfig.loadingText,this.topLoadMethod.call(this,this.actionLoaded),this.scrollTo(this.topConfig.stayDistance)):(this.bottomText=this.bottomConfig.loadingText,this.bottomLoadMethod.call(this,this.actionLoaded),this.scrollTo(-this.bottomConfig.stayDistance))},actionLoaded:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"done";this.state="loaded-"+e;var o=void 0;"down"===this.direction?(this.topText="done"===e?this.topConfig.doneText:this.topConfig.failText,o=this.topConfig.loadedStayTime):(this.bottomText="done"===e?this.bottomConfig.doneText:this.bottomConfig.failText,o=this.bottomConfig.loadedStayTime),setTimeout(function(){t.scrollTo(0),setTimeout(function(){t.state=""},200)},o)},scrollTo:function(t){var e=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200;this.$el.style.transition=o+"ms",this.diff=t,setTimeout(function(){e.$el.style.transition=""},o)},checkBottomReached:function(){return this.scrollEl.scrollTop+this.scrollEl.offsetHeight>=this.scrollEl.scrollHeight},handleTouchStart:function(t){this.startY=t.touches[0].clientY,this.beforeDiff=this.diff,this.startScrollTop=this.scrollEl.scrollTop,this.bottomReached=this.checkBottomReached()},handleTouchMove:function(t){if(!(this.startY<this.scrollEl.getBoundingClientRect().top&&this.startY>this.scrollEl.getBoundingClientRect().bottom))if(this.currentY=t.touches[0].clientY,this.distance=(this.currentY-this.startY)/this.distanceIndex+this.beforeDiff,this.direction=this.distance>0?"down":"up",0===this.startScrollTop&&"down"===this.direction){if(t.preventDefault(),t.stopPropagation(),this.diff=this.distance,this.isThrottle?this.throttleEmitTopPull():this.$emit("top-pull",this.diff),void 0===this.topLoadMethod)return;this.distance<this.topConfig.triggerDistance&&"pull"!==this.state&&"loading"!==this.state?this.actionPull():this.distance>=this.topConfig.triggerDistance&&"trigger"!==this.state&&"loading"!==this.state&&this.actionTrigger()}else if(this.bottomReached&&"up"===this.direction){if(t.preventDefault(),t.stopPropagation(),this.diff=this.distance,this.isThrottle?this.throttleEmitBottomPull():this.$emit("bottom-pull",this.diff),void 0===this.bottomLoadMethod)return;Math.abs(this.distance)<this.bottomConfig.triggerDistance&&"pull"!==this.state&&"loading"!==this.state?this.actionPull():Math.abs(this.distance)>=this.bottomConfig.triggerDistance&&"trigger"!==this.state&&"loading"!==this.state&&this.actionTrigger()}},handleTouchEnd:function(){if(0!==this.diff){if("trigger"===this.state)return void this.actionLoading();if("trigger"===this.state)return void this.actionLoading();0!==this.diff&&this.scrollTo(0)}},handleScroll:function(){this.checkBottomReached()&&this.$emit("infinite-scroll")},throttleEmitTopPull:function(){this.$emit("top-pull",this.diff)},throttleEmitBottomPull:function(){this.$emit("bottom-pull",this.diff)},bindEvents:function(){this.scrollEl.addEventListener("touchstart",this.handleTouchStart),this.scrollEl.addEventListener("touchmove",this.handleTouchMove),this.scrollEl.addEventListener("touchend",this.handleTouchEnd),this.scrollEl.addEventListener("scroll",(0,i.throttle)(this.handleScroll,300))},init:function(){this.throttleEmitTopPull=(0,i.throttle)(this.throttleEmitTopPull,200),this.throttleEmitBottomPull=(0,i.throttle)(this.throttleEmitBottomPull,200),this.scrollEl=this.$el.querySelector(".scroll-container"),this.bindEvents()}},mounted:function(){this.init()}},t.exports=e.default},function(t,e,o){e=t.exports=o(6)(void 0),e.push([t.i,"\n.vue-pull-to-wrapper[data-v-12abd9fb] {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n  -webkit-flex-direction: column;\n          flex-direction: column;\n  height: 100%;\n}\n.scroll-container[data-v-12abd9fb] {\n  -webkit-box-flex: 1;\n  -webkit-flex: 1;\n          flex: 1;\n  overflow-y: auto;\n  -webkit-overflow-scrolling: touch;\n}\n.vue-pull-to-wrapper .action-block[data-v-12abd9fb] {\n  position: relative;\n  width: 100%;\n}\n.defalut-text[data-v-12abd9fb] {\n  height: 100%;\n  line-height: 50px;\n  text-align: center;\n}\n",""])},function(t,e){function o(t,e){var o=t[1]||"",n=t[3];if(!n)return o;if(e&&"function"==typeof btoa){var s=i(n);return[o].concat(n.sources.map(function(t){return"/*# sourceURL="+n.sourceRoot+t+" */"})).concat([s]).join("\n")}return[o].join("\n")}function i(t){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t))))+" */"}t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var i=o(e,t);return e[2]?"@media "+e[2]+"{"+i+"}":i}).join("")},e.i=function(t,o){"string"==typeof t&&(t=[[null,t,""]]);for(var i={},n=0;n<this.length;n++){var s=this[n][0];"number"==typeof s&&(i[s]=!0)}for(n=0;n<t.length;n++){var r=t[n];"number"==typeof r[0]&&i[r[0]]||(o&&!r[2]?r[2]=o:o&&(r[2]="("+r[2]+") and ("+o+")"),e.push(r))}},e}},function(t,e){t.exports=function(t,e,o,i){var n,s=t=t||{},r=typeof t.default;"object"!==r&&"function"!==r||(n=t,s=t.default);var a="function"==typeof s?s.options:s;if(e&&(a.render=e.render,a.staticRenderFns=e.staticRenderFns),o&&(a._scopeId=o),i){var l=Object.create(a.computed||null);Object.keys(i).forEach(function(t){var e=i[t];l[t]=function(){return e}}),a.computed=l}return{esModule:n,exports:s,options:a}}},function(t,e,o){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"vue-pull-to-wrapper",style:{transform:"translate3d(0, "+t.diff+"px, 0)"}},[t.topLoadMethod?o("div",{staticClass:"action-block",style:{height:t.topBlockHeight+"px",marginTop:-t.topBlockHeight+"px"}},[t._t("top-block",[o("p",{staticClass:"defalut-text"},[t._v(t._s(t.topText))])],{state:t.state,stateText:t.topText})],2):t._e(),t._v(" "),o("div",{staticClass:"scroll-container"},[t._t("default")],2),t._v(" "),t.bottomLoadMethod?o("div",{staticClass:"action-block",style:{height:t.bottomBlockHeight+"px",marginBottom:-t.bottomBlockHeight+"px"}},[t._t("bottom-block",[o("p",{staticClass:"defalut-text"},[t._v(t._s(t.bottomText))])],{state:t.state,stateText:t.bottomText})],2):t._e()])},staticRenderFns:[]},t.exports.render._withStripped=!0},function(t,e,o){var i=o(5);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);o(10)("4ce9aaf4",i,!1)},function(t,e,o){function i(t){for(var e=0;e<t.length;e++){var o=t[e],i=u[o.id];if(i){i.refs++;for(var n=0;n<i.parts.length;n++)i.parts[n](o.parts[n]);for(;n<o.parts.length;n++)i.parts.push(s(o.parts[n]));i.parts.length>o.parts.length&&(i.parts.length=o.parts.length)}else{for(var r=[],n=0;n<o.parts.length;n++)r.push(s(o.parts[n]));u[o.id]={id:o.id,refs:1,parts:r}}}}function n(){var t=document.createElement("style");return t.type="text/css",d.appendChild(t),t}function s(t){var e,o,i=document.querySelector('style[data-vue-ssr-id~="'+t.id+'"]');if(i){if(p)return g;i.parentNode.removeChild(i)}if(m){var s=f++;i=h||(h=n()),e=r.bind(null,i,s,!1),o=r.bind(null,i,s,!0)}else i=n(),e=a.bind(null,i),o=function(){i.parentNode.removeChild(i)};return e(t),function(i){if(i){if(i.css===t.css&&i.media===t.media&&i.sourceMap===t.sourceMap)return;e(t=i)}else o()}}function r(t,e,o,i){var n=o?"":i.css;if(t.styleSheet)t.styleSheet.cssText=v(e,n);else{var s=document.createTextNode(n),r=t.childNodes;r[e]&&t.removeChild(r[e]),r.length?t.insertBefore(s,r[e]):t.appendChild(s)}}function a(t,e){var o=e.css,i=e.media,n=e.sourceMap;if(i&&t.setAttribute("media",i),n&&(o+="\n/*# sourceURL="+n.sources[0]+" */",o+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */"),t.styleSheet)t.styleSheet.cssText=o;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(o))}}var l="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!l)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var c=o(11),u={},d=l&&(document.head||document.getElementsByTagName("head")[0]),h=null,f=0,p=!1,g=function(){},m="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());t.exports=function(t,e,o){p=o;var n=c(t,e);return i(n),function(e){for(var o=[],s=0;s<n.length;s++){var r=n[s],a=u[r.id];a.refs--,o.push(a)}e?(n=c(t,e),i(n)):n=[];for(var s=0;s<o.length;s++){var a=o[s];if(0===a.refs){for(var l=0;l<a.parts.length;l++)a.parts[l]();delete u[a.id]}}}};var v=function(){var t=[];return function(e,o){return t[e]=o,t.filter(Boolean).join("\n")}}()},function(t,e){t.exports=function(t,e){for(var o=[],i={},n=0;n<e.length;n++){var s=e[n],r=s[0],a=s[1],l=s[2],c=s[3],u={id:t+":"+n,css:a,media:l,sourceMap:c};i[r]?i[r].parts.push(u):o.push(i[r]={id:r,parts:[u]})}return o}}])});